from locust import HttpUser, task, between
from src.utils.api import send_post_request, send_get_request, send_post_request_with_files
from src.utils.common import get_config

bearer_token = "Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IjAyMmZhMzE4LTU4OGItNGVjMi05ZjEzLWNlMDA1OTU0ZmMxMiJ9.eyJraWQiOiIwMjJmYTMxOC01ODhiLTRlYzItOWYxMy1jZTAwNTk1NGZjMTIiLCJhdWQiOiJodHRwczovL3N0b3J5LW1vbm9yZXBvLWh1Yi52ZXJjZWwuYXBwIiwiaXNzIjoiYXBwLmR5bmFtaWNhdXRoLmNvbS8xN2EyZTI5Ni0yNzc2LTRkMGYtYmM4ZC1kYWFmNWQ0ZTBmZGUiLCJzdWIiOiJjZGQzOTk4ZS1hMTQ1LTQ4MzYtODEwMi1kZGRkN2JiYjcyYTEiLCJzaWQiOiJiNzAzNmQ5YS1iYTJmLTQ1ZDctOTA3ZC0wYzYxY2Q5ODQ1NGUiLCJlbWFpbCI6ImphY3F1ZWxpbmUrM0A1N2Jsb2Nrcy5jb20iLCJlbnZpcm9ubWVudF9pZCI6IjE3YTJlMjk2LTI3NzYtNGQwZi1iYzhkLWRhYWY1ZDRlMGZkZSIsImxpc3RzIjpbXSwibWlzc2luZ19maWVsZHMiOltdLCJ2ZXJpZmllZF9jcmVkZW50aWFscyI6W3siYWRkcmVzcyI6IjB4NjAxOGY2OWQwQTA2ZTQ3Y0Q5QzA4ZkMzNzFmNmNGNTg3QjAyMTI1OSIsImNoYWluIjoiZWlwMTU1IiwiaWQiOiJlYjM3MDhjMS0yZmNkLTQwZjgtYWU3YS1lY2Q1ZjI5YzEzY2UiLCJuYW1lX3NlcnZpY2UiOnt9LCJwdWJsaWNfaWRlbnRpZmllciI6IjB4NjAxOGY2OWQwQTA2ZTQ3Y0Q5QzA4ZkMzNzFmNmNGNTg3QjAyMTI1OSIsIndhbGxldF9uYW1lIjoibWV0YW1hc2siLCJ3YWxsZXRfcHJvdmlkZXIiOiJicm93c2VyRXh0ZW5zaW9uIiwiZm9ybWF0IjoiYmxvY2tjaGFpbiIsImxhc3RTZWxlY3RlZEF0IjoiMjAyNC0wOS0yM1QwODo1ODoxOS43MTRaIn0seyJlbWFpbCI6ImphY3F1ZWxpbmUrM0A1N2Jsb2Nrcy5jb20iLCJpZCI6IjQ2MGEwNTg4LWEyNWEtNGVjNi1hMTY4LTEwNjNmMDU4OTU0MCIsInB1YmxpY19pZGVudGlmaWVyIjoiamFjcXVlbGluZSszQDU3YmxvY2tzLmNvbSIsImZvcm1hdCI6ImVtYWlsIn1dLCJsYXN0X3ZlcmlmaWVkX2NyZWRlbnRpYWxfaWQiOiI0NjBhMDU4OC1hMjVhLTRlYzYtYTE2OC0xMDYzZjA1ODk1NDAiLCJmaXJzdF92aXNpdCI6IjIwMjQtMDktMjNUMDg6NTg6MTkuNjk0WiIsImxhc3RfdmlzaXQiOiIyMDI0LTA5LTIzVDA4OjU4OjE5LjY5NFoiLCJuZXdfdXNlciI6dHJ1ZSwibWV0YWRhdGEiOnt9LCJpYXQiOjE3MjcwODE5NDYsImV4cCI6MTcyOTY3Mzk0Nn0.Q4PRNCQaTagaItabWYEGIogYwq12uqixcK6NcK2l2k7IUpxt9pHGeyAV3IBNUxb5U2lpMmZZOF4FaXrnRaLSBmHOe0TLBNRyDVWRheF8ixsbtANpjVRUqnK4QdhgJnxahRmIz4qXHNO5_xx_0wY3baPx16neEeAswuAB2oPYI2bf6kWbvqO6IZDGa_rWez_5jw2HpTBRHKWsAtOG0_o83ZK8dm8PAGc1JiRuvdNhQ7sieLwRp8RTfJuB7BrS2kQ7RZKPAHT2qtfb3YsLWuDdDvaYpmxRE8wGQfG8KlqVr_oIwHiT-pORp7BKCr4AkymBbf2e_Klx_k6ml1_K4kcnyAnalLRK3anZm5qbJAcWDj5-9Hmm546qNYSuWhFExPC5DTcWfgEk2xtEZSrC-ps3skSFbglNfqKJIN3_X-yREnwEzlcH01AOlVYAUlz4__dZIk6B864CQsdxN50RbX0t9Ejv7JWuwrTGA7tEwX3n2qOWAZqgM4rALX5a1T-ibc07JTGnzve8HridS00tz9pLwTXDxoNxqck1_fVs67I4P7lbB3ZtC7pMbRruFvsvO1DYdnYaEUAHO8bwXqVZj-0UUZIe1vUsdXGDvMEJfrPbo9nTev8wlN4BCk-0Y1qAGlixVVNrQxu0n6MTp0MKmuXaN5_9DFOqvjKlNCR5Y6Z7hPY"

class UserBehavior(HttpUser):
    wait_time = between(1, 10)

    @task
    def post_api(self):
        # env_config = get_config('config.json')
        path = "https://edge.stg.storyprotocol.net/hub/users/v1/upload"
        headers = {
            'Authorization': bearer_token
        }
        payload = {'file_name': 'test_image.png'}
        files=[('file',('test_image.png',open('test_image.png','rb'),'image/png'))]

        send_post_request_with_files(self, path, headers, payload, files)
